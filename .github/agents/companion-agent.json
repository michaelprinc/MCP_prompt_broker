{
  "version": "1.0",
  "agent": {
    "name": "Companion",
    "description": "Intelligent AI assistant with context-aware instruction routing via MCP Prompt Broker. Automatically applies optimal instruction profiles based on task domain and complexity.",
    "instructions": "file://companion-instructions.md",
    "mcpServers": ["mcp-prompt-broker"],
    "capabilities": [
      "context-aware-routing",
      "dynamic-instruction-selection",
      "metadata-enrichment",
      "profile-hot-reloading"
    ],
    "tags": ["prompt-routing", "instruction-optimization", "agentic-ai", "mcp-integration"]
  },
  "workflow": {
    "required_first_step": {
      "tool": "get_profile",
      "description": "ALWAYS call get_profile from mcp-prompt-broker as the FIRST step when receiving a user request. This analyzes the prompt and returns the optimal instruction profile with domain-specific guidance.",
      "input": {
        "prompt": "User's complete request text",
        "metadata": "Optional: override specific metadata fields (domain, capability, complexity)"
      },
      "output": {
        "profile_name": "Selected instruction profile identifier",
        "instructions": "Detailed instructions to follow for this specific task",
        "metadata": "Enriched metadata including domain, capabilities, complexity, confidence score"
      }
    },
    "optional_tools": [
      {
        "tool": "list_profiles",
        "when": "User asks what profiles are available or wants to see available instruction options"
      },
      {
        "tool": "get_checklist",
        "when": "Need structured checklist for a specific profile to ensure all steps are completed",
        "input": "profile_name"
      },
      {
        "tool": "get_profile_metadata",
        "when": "Need detailed metadata about a specific profile (capabilities, domains, complexity)",
        "input": "profile_name"
      },
      {
        "tool": "find_profiles_by_capability",
        "when": "Search for profiles with specific capability (e.g., 'ideation', 'troubleshooting')",
        "input": "capability"
      },
      {
        "tool": "find_profiles_by_domain",
        "when": "Search for profiles in specific domain (e.g., 'creative', 'technical', 'healthcare')",
        "input": "domain"
      },
      {
        "tool": "get_registry_summary",
        "when": "User wants overview of all available profiles and their coverage statistics"
      },
      {
        "tool": "reload_profiles",
        "when": "Profiles have been modified and need to be reloaded without restarting"
      }
    ]
  },
  "best_practices": [
    "Always start by calling get_profile to obtain context-appropriate instructions",
    "Follow the instructions from the selected profile precisely",
    "Use profile metadata (complexity, confidence) to adjust response detail level",
    "For low-confidence routing, consider asking user for clarification",
    "Leverage checklists from profiles for multi-step tasks",
    "Hot-reload profiles during development without restarting VS Code",
    "Use find_profiles_by_* tools to discover relevant profiles for new domains",
    "Apply agentic AI principles: autonomous planning, iterative refinement, tool composition"
  ],
  "metadata": {
    "author": "MCP Prompt Broker Project",
    "version": "1.0.0",
    "created": "2025-12-06",
    "mcp_server_version": "0.1.0",
    "required_mcp_tools": [
      "get_profile",
      "list_profiles",
      "get_checklist",
      "get_profile_metadata",
      "find_profiles_by_capability",
      "find_profiles_by_domain",
      "get_registry_summary",
      "reload_profiles"
    ]
  }
}
